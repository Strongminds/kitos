<div id="mainGrid" data-kendo-grid="systemCatalogVm.mainGrid" data-k-options="systemCatalogVm.mainGridOptions"></div>

<div data-kendo-window="systemCatalogVm.modal"
     data-k-title="'Anvendelse'" data-k-width="800"
     data-k-visible="false" data-k-modal="true">
    <div data-kendo-grid="systemCatalogVm.usageGrid" data-k-options="systemCatalogVm.usageDetailsGrid"></div>
</div>

<div data-kendo-window="systemCatalogVm.modalMigration"
     data-k-title="'Migration'" data-k-width="800"
     data-k-visible="false" data-k-modal="true" id="migrationModelWindow2">
    <!--<div id="availableSystems" data-kendo-grid="systemCatalogVm.usageGridMigration" data-k-options="systemCatalogVm.usageDetailsGridMigration"></div>-->
    <div id="select2MigrationContainer">
        <input type="hidden"
               id="new-system-usage"
               class="form-control input-sm"
               data-ui-select2="mySelectOptions"
               data-ng-model="mySelectOptionsModel"
               data-placeholder="Vælg IT system">
        <button ng-click='systemCatalogVm.migrateSystemTo()' class='k-primary pull-right'>Se konsekvens</button>
    </div>
</div>

<div data-kendo-window="systemCatalogVm.modalMigrationConsequence"
     data-k-title="'Konsekvens'" data-k-width="1100"
     data-k-visible="false" data-k-modal="true">
    <div id="copyPasteConsequence">
        <div>
            <h3>Opsummering af ændringer ifm. flytning af ”IT-System anvendelse” til et nyt hovedsystem </h3>
            <br>
            <div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Systemanvendelse flyttes
                    </div>
                    <table class="migrationReportTables migrationSystemNamesTable table org-role-table">
                        <tr>
                            <th>Fra</th>
                            <th>Til</th>
                        </tr>
                        <tr class="evenMigrationReportColors">
                            <td>
                                Systemnavn: {{systemCatalogVm.migrationReportDTO.fromSystem.name }}
                                <br />
                                System ID: {{ systemCatalogVm.migrationReportDTO.fromSystem.id}}
                            </td>
                            <td>
                                Systemnavn: {{systemCatalogVm.migrationReportDTO.toSystem.name }}
                                <br />
                                System ID: {{ systemCatalogVm.migrationReportDTO.toSystem.id}}
                            </td>
                        </tr>
                    </table>
                </div>
                <br>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Følgende kontrakter berøres
                    </div>
                    <table class="migrationReportTables migrationInterfacesReportTable full-width table org-role-table">
                        <tr>
                            <th role="columnheader">Id</th>
                            <th role="columnheader">Navn</th>
                            <th role="columnheader">System anvendes</th>
                            <th role="columnheader">“Anvender” relationer der flyttes</th>
                            <th role="columnheader">“Udstiller” relationer der slettes</th>
                        </tr>
                        <tr ng-repeat="aff in systemCatalogVm.migrationReportDTO.affectedContracts track by $index" ng-class="$index % 2 == 0 ? 'evenMigrationReportColors' : 'oddMigrationReportColors'">
                            <td>{{aff.contract.id}}</td>
                            <td>{{aff.contract.name}}</td>
                            <td>ja</td>
                            <td> <ul> <li ng-repeat="aiu in aff.affectedInterfaceUsages">{{aiu.id}} - {{aiu.name}}</li></ul></td>
                            <td> <ul> <li ng-repeat="aed in aff.interfaceExhibitUsagesToBeDeleted">{{aed.id}} - {{aed.name}}</li></ul></td>
                        </tr>
                    </table>
                </div>
                <br />
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Følgende projekter, hvor IT-Systemet anvendes, berørers
                    </div>
                    <table class="migrationReportTables migrationItprojectsReportTable table org-role-table">
                        <tr>
                            <th>Id</th>
                            <th>Navn</th>
                        </tr>
                        <tr ng-repeat="aip in systemCatalogVm.migrationReportDTO.affectedItProjects track by $index" ng-class="$index % 2 == 0 ? 'evenMigrationReportColors' : 'oddMigrationReportColors'">
                            <td>{{aip.id}}</td>
                            <td>{{aip.name}}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <button ng-click='systemCatalogVm.copyToClipBoard()'>Copy</button>
        <button ng-click='systemCatalogVm.cancelMigration()' class='k-primary pull-left'>Annullere</button>
        <button ng-click='systemCatalogVm.startMigration()' class='k-primary pull-right'>Start flytning</button>
        <style>
            .oddMigrationReportColors {
                background-color: white;
            }

            .evenMigrationReportColors {
                background-color: lightgray;
            }

            .migrationReportTables {
            }

            .migrationInterfacesReportTable {
            }

            .migrationItprojectsReportTable {
            }
        </style>
    </div>
