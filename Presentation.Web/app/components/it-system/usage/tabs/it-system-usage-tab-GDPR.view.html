<div class="object-section-container">
    <h4>{{usage.itSystem.name}} <span ng-if="usage.itSystem.disabled">(inaktiv)</span></h4>
    <div class="panel panel-default">
        <div class="row">
            <!-- 1st column -->
            <div class="col-xs-6">

                <div class="form-group">
                    <label class="control-label small">Overordnet formål</label>
                    <input type="text"
                           data-ng-disabled="!hasWriteAccess"
                           data-autosave="{{updateUrl}}"
                           class="form-control input-sm"
                           data-field="GeneralPurpose"
                           data-ng-model="generalPurpose"
                           data-placeholder="Overordnet formål" />
                </div>

                <div class="form-group">
                    <label for="system-name" class="control-label small">Er systemet forretningskritisk?</label>
                    <select class="form-control input-sm"
                            data-ng-disabled="!hasWriteAccess"
                            data-autosave="{{updateUrl}}"
                            data-field="isBusinessCritical"
                            ui-select2="{minimumResultsForSearch: -1}"
                            data-ng-model="usage.isBusinessCritical">
                        <option value="1">Ja</option>
                        <option value="0">Nej</option>
                        <option value="2">Ved Ikke</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="system-name" class="control-label small">Indeholder systemet oplysninger om straffedomme og lovovertrædelser?</label>
                    <select class="form-control input-sm"
                            data-ng-disabled="!hasWriteAccess"
                            ui-select2="{minimumResultsForSearch: -1}"
                            data-ng-model="usage.containsLegalInfo"
                            data-autosave="{{updateUrl}}"
                            data-field="containsLegalInfo">
                        <option value="1">Ja</option>
                        <option value="0">Nej</option>
                        <option value="2">Ved Ikke</option>
                    </select>
                </div>

                //** Dummy data herfra og ned **\\
                <!-- Category of data -->
                <div class="form-group">
                    <select-option data-id="category"
                                   data-label="Kategorier af data i systemet"
                                   data-placeholder="Vælg kategori"
                                   data-selected-text="{{ systemCategories }}"
                                   data-ng-disabled="!hasWriteAccess"
                                   data-ng-model="systemCategories.Id"
                                   data-options="systemCategories"
                                   data-auto-save-url=""
                                   data-field="systemCategories">
                    </select-option>
                </div>
                <!-- Data responsible -->
                <!--<div class="form-group">
                    <label for="dataResponsible" class="control-label small">Dataansvarlig for system</label>
                    <input id="dataResponsible" type="text" class="form-control input-sm"
                           data-ng-model="dataResponsible"
                           data-ng-disabled="!hasWriteAccess"
                           data-field="dataResponsible"
                           data-autosave="api/itSystemUsage/{{usageId}}">
                </div>-->
                <!-- Data processor -->
                <div class="form-group">
                    <label for="dataProcessor" class="control-label small">Dataansvarlig for system</label>
                    <input id="dataProcessor" type="text" class="form-control input-sm"
                           data-ng-model="dataProcessor"
                           data-ng-disabled="!hasWriteAccess"
                           data-field="dataProcessor"
                           data-autosave="api/itSystemUsage/{{usageId}}">
                </div>
                <!-- Data processing agreement -->
                <div class="form-group">
                    <label for="dataProcessingAgreement" class="control-label small">Databehandler aftale</label>
                    <input type="text" id="dataProcessingAgreement" class="form-control input-sm"
                           data-ng-disabled="true"
                           value="{{dataProcessingAgreement}}">
                </div>
                <!-- Data processor control -->
                <div class="form-group">
                    <label class="control-label small">Tilsyn/kontrol af databehandleren</label><br>
                    <input type="radio" id="dataProcessorControlYes"
                           data-ng-model="dataProcessorControl"
                           ng-value="1"
                           data-ng-disabled="!hasWriteAccess"
                           ng-click="patch('dataProcessorControl', 1)"
                           data-field="dataProcessorControl">
                    <label class="control-label small" for="dataProcessorControlYes">Ja</label>
                    &nbsp;
                    <input type="radio" id="dataProcessorControlNo"
                           data-ng-model="dataProcessorControl"
                           ng-value="0"
                           data-ng-disabled="!hasWriteAccess"
                           ng-click="patch('dataProcessorControl', 0)"
                           data-field="dataProcessorControl">
                    <label class="control-label small" for="dataProcessorControlNo">Nej</label>
                    &nbsp;
                    <input type="radio" id="dataProcessorControlDunno"
                           data-ng-model="dataProcessorControl"
                           ng-value="2"
                           data-ng-disabled="!hasWriteAccess"
                           ng-click="patch('dataProcessorControl', 2)"
                           data-field="dataProcessorControl">
                    <label class="control-label small" for="dataProcessorControlDunno">Ved ikke</label>
                </div>
                <div ng-show="dataProcessorControl == 1">
                    <!-- Date of last control of the data processor -->
                    <div class="form-group">
                        <label for="lastControl" class="control-label small">Dato for seneste tilsyn/kontrol</label>
                        <input type="text" id="lastControl" class="form-control"
                               data-kendo-date-picker
                               data-k-options="datepickerOptions"
                               data-ng-disabled="!hasWriteAccess"
                               data-ng-model="lastControl"
                               ng-blur="patchDate('lastControl', lastControl)"
                               data-field="lastControl">
                        <span id="helpBlock" class="help-block small">Eksempelvis "2017-04-25"</span>
                    </div>
                </div>
                <!-- Notes -->
                <div class="form-group">
                    <label for="note" class="control-label small">Bemærkninger</label>
                    <textarea id="note" class="form-control input-sm" rows="5"
                              data-ng-disabled="!hasWriteAccess"
                              data-ng-model="note"
                              ng-blur="patch('note', note)"
                              data-field="note"></textarea>
                </div>
            </div>
            <!-- 2nd column -->
            <div class="col-xs-6">

                <div class="col-md-6">
                    <div class="form-group">
                        <label class="control-label small">Hvilke kategorier af registrerede indgår i databehandlingen?</label>
                        <div class="well">
                            <div class="checkbox" data-ng-repeat="r in registerTypes">
                                <label>
                                    <input type="checkbox" ng-model="r.Checked"
                                           data-ng-disabled="!hasWriteAccess"
                                           ng-click="updateDataLevel(r.Id, r.Checked, 'REGISTERTYPEDATA')">{{r.Name}}
                                </label>
                            </div>
                        </div>
                    </div>

                    //** Dummy data herfra og ned **\\
                    <!-- Catagory of data -->
                    <div class="form-group"
                         data-ng-show="system.dataLevel == 1">
                        <label class="control-label small">Almindelige persondata:</label>
                        <div class="well">
                            <div class="checkbox" data-ng-repeat="r in regularSensitiveData">
                                <label>
                                    <input type="checkbox" ng-model="r.Checked"
                                           data-ng-disabled="!hasWriteAccess"
                                           ng-click="updateDataLevel(r.Id, r.Checked, 'REGULARPERSONALDATA')">{{r.Name}}
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group"
                         data-ng-show="system.dataLevel == 2">
                        <label class="control-label small">Følsomme persondata:</label>
                        <div class="well">
                            <div class="checkbox" data-ng-repeat="r in sensitivePersonalData">
                                <label>
                                    <input type="checkbox" ng-model="r.Checked"
                                           data-ng-disabled="!hasWriteAccess"
                                           ng-click="updateDataLevel(r.Id, r.Checked, 'SENSITIVEPERSONALDATA')">{{r.Name}}
                                </label>
                            </div>
                        </div>
                    </div>
                    <!-- Data on convictions -->
                    <div class="form-group">
                        <label class="control-label small">Oplysninger om straffedomme og lovovertrædelser</label><br>
                        <input type="radio" id="convictionsDataYes"
                               data-ng-model="convictionsData"
                               ng-value="1"
                               data-ng-disabled="!hasWriteAccess"
                               ng-click="patch('convictionsData', 1)"
                               data-field="convictionsData">
                        <label class="control-label small" for="convictionsDataYes">Ja</label>
                        &nbsp;
                        <input type="radio" id="convictionsDataNo"
                               data-ng-model="convictionsData"
                               ng-value="0"
                               data-ng-disabled="!hasWriteAccess"
                               ng-click="patch('convictionsData', 0)"
                               data-field="convictionsData">
                        <label class="control-label small" for="convictionsDataNo">Nej</label>
                        &nbsp;
                        <input type="radio" id="convictionsDataDunno"
                               data-ng-model="convictionsData"
                               ng-value="2"
                               data-ng-disabled="!hasWriteAccess"
                               ng-click="patch('convictionsData', 2)"
                               data-field="convictionsData">
                        <label class="control-label small" for="convictionsDataDunno">Ved ikke</label>
                    </div>
                    <div ng-show="convictionsData == 1 || selection.length > 0">
                        <!-- Implemented technical precautions -->
                        <div class="form-group">
                            <label class="control-label small">Implementeret passende tekniske foranstaltninger</label><br>
                            <input type="radio" id="precautionsYes"
                                   data-ng-model="precautions"
                                   ng-value="1"
                                   data-ng-disabled="!hasWriteAccess"
                                   ng-click="patch('precautions', 1)"
                                   data-field="precautions">
                            <label class="control-label small" for="precautionsYes">Ja</label>
                            &nbsp;
                            <input type="radio" id="precautionsNo"
                                   data-ng-model="precautions"
                                   ng-value="0"
                                   data-ng-disabled="!hasWriteAccess"
                                   ng-click="patch('precautions', 0)"
                                   data-field="precautions">
                            <label class="control-label small" for="precautionsNo">Nej</label>
                            &nbsp;
                            <input type="radio" id="precautionsDunno"
                                   data-ng-model="precautions"
                                   ng-value="2"
                                   data-ng-disabled="!hasWriteAccess"
                                   ng-click="patch('precautions', 2)"
                                   data-field="precautions">
                            <label class="control-label small" for="precautionsDunno">Ved ikke</label>
                        </div>
                        <div ng-show="precautions == 1">
                            <label class="control-label small">Hvad består de af?</label><br>
                            <select class="form-group">
                                <option ng-repeat="x in persOptions">{{x}}</option>
                            </select>
                        </div>
                    </div>
                    <!-- Risk assessment -->
                    <div class="form-group">
                        <label class="control-label small">Foretaget risikovurdering</label><br>
                        <input type="radio" id="riskAssessmentYes"
                               data-ng-model="riskAssessment"
                               ng-value="1"
                               data-ng-disabled="!hasWriteAccess"
                               ng-click="patch('riskAssessment', 1)"
                               data-field="riskAssessment">
                        <label class="control-label small" for="riskAssessmentYes">Ja</label>
                        &nbsp;
                        <input type="radio" id="riskAssessmentNo"
                               data-ng-model="riskAssessment"
                               ng-value="0"
                               data-ng-disabled="!hasWriteAccess"
                               ng-click="patch('riskAssessment', 0)"
                               data-field="riskAssessment">
                        <label class="control-label small" for="riskAssessmentNo">Nej</label>
                        &nbsp;
                        <input type="radio" id="riskAssessmentDunno"
                               data-ng-model="riskAssessment"
                               ng-value="2"
                               data-ng-disabled="!hasWriteAccess"
                               ng-click="patch('riskAssessment', 2)"
                               data-field="riskAssessment">
                        <label class="control-label small" for="riskAssessmentDunno">Ved ikke</label>
                    </div>
                    <div ng-show="riskAssessment == 1">
                        <!-- Date of last risk assesment -->
                        <div class="form-group">
                            <label for="riskAssesmentDate" class="control-label small">Dato for seneste risikovurdering</label>
                            <input type="text" id="riskAssesmentDate" class="form-control"
                                   data-kendo-date-picker
                                   data-k-options="datepickerOptions"
                                   data-ng-disabled="!hasWriteAccess"
                                   data-ng-model="riskAssesmentDate"
                                   ng-blur="patchDate('riskAssesmentDate', riskAssesmentDate)"
                                   data-field="riskAssesmentDate">
                            <span id="helpBlockRisk" class="help-block small">Eksempelvis "2017-04-25"</span>
                        </div>
                        <!-- Previous risk assessment -->
                        <div class="form-group">
                            <label class="control-label small">Hvad viste den seneste risikovurdering?</label><br>
                            <input type="radio" id="preriskAssessmentYes"
                                   data-ng-model="preriskAssessment"
                                   ng-value="1"
                                   data-ng-disabled="!hasWriteAccess"
                                   ng-click="patch('preriskAssessment', 0)"
                                   data-field="preriskAssessment">
                            <label class="control-label small" for="preriskAssessmentYes">Lav risiko</label>
                            &nbsp;
                            <input type="radio" id="preriskAssessmentNo"
                                   data-ng-model="preriskAssessment"
                                   ng-value="0"
                                   data-ng-disabled="!hasWriteAccess"
                                   ng-click="patch('preriskAssessment', 1)"
                                   data-field="preriskAssessment">
                            <label class="control-label small" for="preriskAssessmentNo">Mellem risiko</label>
                            &nbsp;
                            <input type="radio" id="preriskAssessmentDunno"
                                   data-ng-model="preriskAssessment"
                                   ng-value="2"
                                   data-ng-disabled="!hasWriteAccess"
                                   ng-click="patch('preriskAssessment', 2)"
                                   data-field="preriskAssessment">
                            <label class="control-label small" for="preriskAssessmentDunno">Høj risiko</label>
                        </div>
                        <!-- Notes risk -->
                        <div class="form-group">
                            <label for="noteRisks" class="control-label small">Bemærkninger</label>
                            <textarea id="noteRisks" class="form-control input-sm" rows="5"
                                      data-ng-disabled="!hasWriteAccess"
                                      data-ng-model="noteRisks"
                                      ng-blur="patch('noteRisks', noteRisks)"
                                      data-field="noteRisks"></textarea>
                        </div>
                    </div>
                    <div ng-show="preriskAssessment == 2">
                        <!-- DPIA hearing -->
                        <div class="form-group">
                            <label class="control-label small">Er der foretaget en høring hos Datatilsynet?</label><br>
                            <input type="radio" id="DPIAhearingYes"
                                   data-ng-model="DPIAhearing"
                                   ng-value="1"
                                   data-ng-disabled="!hasWriteAccess"
                                   ng-click="patch('DPIAhearing', 1)"
                                   data-field="DPIAhearing">
                            <label class="control-label small" for="DPIAhearingYes">Ja</label>
                            &nbsp;
                            <input type="radio" id="DPIAhearingNo"
                                   data-ng-model="DPIAhearing"
                                   ng-value="0"
                                   data-ng-disabled="!hasWriteAccess"
                                   ng-click="patch('DPIAhearing', 0)"
                                   data-field="DPIAhearing">
                            <label class="control-label small" for="DPIAhearingNo">Nej</label>
                            &nbsp;
                            <input type="radio" id="DPIAhearingDunno"
                                   data-ng-model="DPIAhearing"
                                   ng-value="2"
                                   data-ng-disabled="!hasWriteAccess"
                                   ng-click="patch('DPIAhearing', 2)"
                                   data-field="DPIAhearing">
                            <label class="control-label small" for="DPIAhearingDunno">Ved ikke</label>
                        </div>
                        <div ng-show="DPIAhearing == 1">
                            <!-- Date of DPIA -->
                            <div class="form-group">
                                <label for="DPIADate" class="control-label small">Dato for høring</label>
                                <input type="text" id="DPIADate" class="form-control"
                                       data-kendo-date-picker
                                       data-k-options="datepickerOptions"
                                       data-ng-disabled="!hasWriteAccess"
                                       data-ng-model="DPIADate"
                                       ng-blur="patchDate('DPIADate', DPIADate)"
                                       data-field="DPIADate">
                                <span id="helpBlockDPIA" class="help-block small">Eksempelvis "2017-04-25"</span>
                            </div>
                            <!-- Answering data DPIA -->
                            <div class="form-group">
                                <label class="control-label small">Er der bevaringsfrist på data inden de må slettes?</label><br>
                                <input type="radio" id="answeringDataDPIAYes"
                                       data-ng-model="answeringDataDPIA"
                                       ng-value="1"
                                       data-ng-disabled="!hasWriteAccess"
                                       ng-click="patch('answeringDataDPIA', 1)"
                                       data-field="answeringDataDPIA">
                                <label class="control-label small" for="answeringDataDPIAYes">Ja</label>
                                &nbsp;
                                <input type="radio" id="answeringDataDPIANo"
                                       data-ng-model="answeringDataDPIA"
                                       ng-value="0"
                                       data-ng-disabled="!hasWriteAccess"
                                       ng-click="patch('answeringDataDPIA', 0)"
                                       data-field="answeringDataDPIA">
                                <label class="control-label small" for="answeringDataDPIANo">Nej</label>
                                &nbsp;
                                <input type="radio" id="answeringDataDPIADunno"
                                       data-ng-model="answeringDataDPIA"
                                       ng-value="2"
                                       data-ng-disabled="!hasWriteAccess"
                                       ng-click="patch('answeringDataDPIA', 2)"
                                       data-field="answeringDataDPIA">
                                <label class="control-label small" for="answeringDataDPIADunno">Ved ikke</label>
                            </div>
                            <!-- Date of next delete of data DPIA -->
                            <div class="form-group">
                                <label for="DPIAdeleteDate" class="control-label small">Dato for hvornår der må foretages sletning af data i systemet næste gang</label>
                                <input type="text" id="DPIAdeleteDate" class="form-control"
                                       data-kendo-date-picker
                                       data-k-options="datepickerOptions"
                                       data-ng-disabled="!hasWriteAccess"
                                       data-ng-model="DPIAdeleteDate"
                                       ng-blur="patchDate('DPIAdeleteDate', DPIAdeleteDate)"
                                       data-field="DPIAdeleteDate">
                                <span id="helpBlockDeleteDPIA" class="help-block small">Eksempelvis "2017-04-25"</span>
                            </div>
                            <div class="form-group">
                                <label for="numberDPIA" class="control-label small">Antal måneder mellem sletningsdatoerne - sletningsperioder.</label>
                                <input id="numberDPIA" type="number" class="form-control">
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </div>
</div>